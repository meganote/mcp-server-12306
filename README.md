# ğŸš„ 12306 MCP Server

![screenshot](https://img.shields.io/badge/12306-MCP-blue?logo=railway) ![FastAPI](https://img.shields.io/badge/FastAPI-async-green?logo=fastapi) ![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)

---

## âœ¨ é¡¹ç›®ç®€ä»‹

12306 MCP Server æ˜¯ä¸€æ¬¾åŸºäº Model Context Protocol (MCP) çš„é«˜æ€§èƒ½ç«è½¦ç¥¨æŸ¥è¯¢åç«¯ï¼Œæ”¯æŒå®˜æ–¹ 12306 ä½™ç¥¨ã€è½¦ç«™ã€ç»åœã€æ¢ä¹˜æŸ¥è¯¢ä»¥åŠæ™ºèƒ½æ—¶é—´å·¥å…·ï¼Œé€‚é… AI/è‡ªåŠ¨åŒ–/æ™ºèƒ½åŠ©æ‰‹ç­‰åœºæ™¯ã€‚ç•Œé¢å‹å¥½ï¼Œæ˜“äºé›†æˆï¼Œå¼€ç®±å³ç”¨ã€‚

---

## ğŸš€ åŠŸèƒ½äº®ç‚¹

- å®æ—¶ä½™ç¥¨/è½¦æ¬¡/åº§å¸­/æ—¶åˆ»/æ¢ä¹˜ä¸€ç«™å¼æŸ¥è¯¢
- å…¨å›½è½¦ç«™ä¿¡æ¯ç®¡ç†ä¸æ¨¡ç³Šæœç´¢
- å®˜æ–¹ç»åœç«™ã€ä¸€æ¬¡ä¸­è½¬æ–¹æ¡ˆå…¨æ”¯æŒ
- æ™ºèƒ½æ—¶é—´å·¥å…·ï¼Œæ”¯æŒç›¸å¯¹æ—¥æœŸè®¡ç®—ï¼Œé¿å…æ—¥æœŸè¾“å…¥é”™è¯¯
- Streamable HTTPä¼ è¾“åè®®ï¼Œæ”¯æŒMCP 2025-03-26æ ‡å‡†
- FastAPIå¼‚æ­¥é«˜æ€§èƒ½ï¼Œç§’çº§å“åº”
- MCPæ ‡å‡†ï¼ŒAI/è‡ªåŠ¨åŒ–åœºæ™¯å³æ’å³ç”¨

---

## ğŸ› ï¸ å¿«é€Ÿä¸Šæ‰‹

### ç¯å¢ƒè¦æ±‚
- Python 3.10+
- [uv](https://astral.sh/uv/)ï¼ˆæ¨èåŒ…ç®¡ç†å™¨ï¼‰

### æœ¬åœ°ä¸€é”®éƒ¨ç½²
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/drfccv/mcp-server-12306.git
cd mcp-server-12306

# å®‰è£…ä¾èµ–
uv sync

# æ›´æ–°è½¦ç«™ä¿¡æ¯ï¼ˆå¿…é¡»å…ˆæ‰§è¡Œï¼‰
uv run python scripts/update_stations.py

# å¯åŠ¨æœåŠ¡å™¨
uv run python scripts/start_server.py
```

### Docker éƒ¨ç½²
```bash
# ç›´æ¥æ‹‰å–å·²æ„å»ºé•œåƒ
 docker pull drfccv/mcp-server-12306:latest

# è¿è¡Œå®¹å™¨ï¼ˆæ˜ å°„8000ç«¯å£ï¼‰
 docker run -d -p 8000:8000 --name mcp-server-12306 drfccv/mcp-server-12306:latest
```

> å¦‚éœ€è‡ªå®šä¹‰å¼€å‘æˆ–æœ¬åœ°ä¿®æ”¹åå†æ‰“åŒ…ï¼Œå¯ç”¨å¦‚ä¸‹å‘½ä»¤è‡ªè¡Œæ„å»ºé•œåƒï¼š
> ```bash
> docker build -t drfccv/mcp-server-12306:latest .
> ```

### é…ç½®
å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶æŒ‰éœ€ä¿®æ”¹ï¼š
```bash
cp .env.example .env
```

---

## ğŸ¤– API & å·¥å…·ä¸€è§ˆ

### MCP å®¢æˆ·ç«¯é…ç½®ç¤ºä¾‹
```json
{
  "mcpServers": {
    "12306": {
      "url": "http://localhost:8000/mcp"
    }
  }
}
```

### æ”¯æŒçš„ä¸»æµç¨‹å·¥å…·
| å·¥å…·å                    | å…¸å‹åœºæ™¯/åŠŸèƒ½æè¿°                 |
|--------------------------|----------------------------------|
| query_tickets            | ä½™ç¥¨/è½¦æ¬¡/åº§å¸­/æ—¶åˆ»ä¸€ç«™å¼æŸ¥è¯¢     |
| search_stations          | è½¦ç«™æ¨¡ç³Šæœç´¢ï¼Œæ”¯æŒä¸­æ–‡/æ‹¼éŸ³/ç®€æ‹¼   |
| get_station_info         | è·å–è½¦ç«™è¯¦æƒ…ï¼ˆåç§°ã€ä»£ç ã€åœ°ç†ç­‰ï¼‰ |
| query_transfer           | ä¸€æ¬¡ä¸­è½¬æ¢ä¹˜æ–¹æ¡ˆï¼Œè‡ªåŠ¨æ‹¼æ¥æœ€ä¼˜ä¸­è½¬ |
| get_train_route_stations | æŸ¥è¯¢æŒ‡å®šåˆ—è½¦ç»åœç«™åŠæ—¶åˆ»è¡¨         |
| get_current_time         | è·å–å½“å‰æ—¶é—´ä¸ç›¸å¯¹æ—¥æœŸï¼Œå¸®åŠ©ç”¨æˆ·å‡†ç¡®é€‰æ‹©å‡ºè¡Œæ—¥æœŸ |

---

## ğŸ“š å·¥å…·æ–‡æ¡£

æœ¬é¡¹ç›®æ‰€æœ‰ä¸»æµç¨‹å·¥å…·çš„è¯¦ç»†åŠŸèƒ½ã€å®ç°ä¸ä½¿ç”¨æ–¹æ³•ï¼Œå‡å·²æ”¶å½•äº [`/docs`](./docs) ç›®å½•ä¸‹ï¼š

- [query_tickets.md](./docs/query_tickets.md) â€” ä½™ç¥¨/è½¦æ¬¡/åº§å¸­/æ—¶åˆ»ä¸€ç«™å¼æŸ¥è¯¢
- [search_stations.md](./docs/search_stations.md) â€” è½¦ç«™æ¨¡ç³Šæœç´¢
- [get_station_info.md](./docs/get_station_info.md) â€” è·å–è½¦ç«™è¯¦æƒ…
- [query_transfer.md](./docs/query_transfer.md) â€” ä¸€æ¬¡ä¸­è½¬æ¢ä¹˜æ–¹æ¡ˆ
- [get_train_route_stations.md](./docs/get_train_route_stations.md) â€” æŸ¥è¯¢åˆ—è½¦ç»åœç«™
- [get_current_time.md](./docs/get_current_time.md) â€” è·å–å½“å‰æ—¶é—´ä¸ç›¸å¯¹æ—¥æœŸ

æ¯ä¸ªæ–‡æ¡£åŒ…å«ï¼š
- å·¥å…·åŠŸèƒ½è¯´æ˜
- å®ç°æ–¹æ³•
- è¯·æ±‚å‚æ•°ä¸è¿”å›ç¤ºä¾‹
- å…¸å‹è°ƒç”¨æ–¹å¼

å¦‚éœ€äºŒæ¬¡å¼€å‘æˆ–é›†æˆï¼Œå»ºè®®å…ˆé˜…è¯»å¯¹åº”å·¥å…·çš„æ–‡æ¡£ã€‚

---

## ğŸ§© ç›®å½•ç»“æ„

```
src/mcp_12306/    # ä¸»æºä»£ç 
  â”œâ”€ server.py    # FastAPIä¸»å…¥å£
  â”œâ”€ services/    # ä¸šåŠ¡é€»è¾‘ï¼ˆè½¦ç¥¨/è½¦ç«™/HTTPï¼‰
  â”œâ”€ models/      # æ•°æ®æ¨¡å‹
  â”œâ”€ utils/       # å·¥å…·ä¸é…ç½®
scripts/          # å¯åŠ¨ä¸æ•°æ®è„šæœ¬
```

---

## ğŸ§ª æµ‹è¯•
```bash
uv run pytest
```

---

## ğŸ“¦ é•œåƒå‘å¸ƒä¸æ‹‰å–

- é•œåƒä»“åº“ï¼š[drfccv/mcp-server-12306](https://hub.docker.com/r/drfccv/mcp-server-12306)
- æ‹‰å–é•œåƒï¼š
  ```bash
  docker pull drfccv/mcp-server-12306:latest
  ```
- è¿è¡Œé•œåƒï¼š
  ```bash
  docker run -d -p 8000:8000 --name 12306-mcp-server drfccv/mcp-server-12306:latest
  ```

---

## ğŸ“„ License
MIT License

---

## âš ï¸ å…è´£å£°æ˜

- æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ã€ç ”ç©¶ä¸æŠ€æœ¯äº¤æµï¼Œä¸¥ç¦ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€‚
- æœ¬é¡¹ç›®ä¸å­˜å‚¨ã€ä¸ç¯¡æ”¹ã€ä¸ä¼ æ’­ä»»ä½• 12306 å®˜æ–¹æ•°æ®ï¼Œä»…ä½œä¸ºå®˜æ–¹å…¬å¼€æ¥å£çš„æ™ºèƒ½èšåˆä¸è½¬å‘ã€‚
- ä½¿ç”¨æœ¬é¡¹ç›®é€ æˆçš„ä»»ä½•åæœï¼ˆåŒ…æ‹¬ä½†ä¸é™äºè´¦å·å°ç¦ã€æ•°æ®å¼‚å¸¸ã€æ³•å¾‹é£é™©ç­‰ï¼‰å‡ç”±ä½¿ç”¨è€…æœ¬äººæ‰¿æ‹…ï¼Œé¡¹ç›®ä½œè€…ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚
- è¯·éµå®ˆä¸­å›½æ³•å¾‹æ³•è§„åŠ 12306 å®˜æ–¹ç›¸å…³è§„å®šï¼Œåˆç†åˆè§„ä½¿ç”¨ã€‚

---


